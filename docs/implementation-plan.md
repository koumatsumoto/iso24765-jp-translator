# ISO 24765 用語翻訳システム 実装計画

## 全体スケジュール

### Phase 1: データ変換 (実装対象)

- JSON → JSONL変換機能の実装
- 変換後データの検証

### Phase 2: 翻訳処理 (Claude手動実行)

- Claudeが直接翻訳を実行
- 実装不要

### Phase 3: 品質チェック (Claude手動実行)

- Claudeが品質チェックを実行
- 実装不要

## 詳細作業計画

### Phase 1: データ変換 (実装対象)

#### 1.1 JSON → JSONL変換スクリプト作成

- **ファイル**: `scripts/convert-to-jsonl.ts`
- **所要時間**: 4時間
- **作業内容**:
  - 入力JSONファイルの読み込み
  - 配列の各要素を1行ずつJSONL形式で出力
  - エラーハンドリング（不正なJSON、ファイルアクセスエラー）
  - 変換進捗の表示

#### 1.2 変換後データの検証

- **ファイル**: `scripts/validate-jsonl.ts`
- **所要時間**: 2時間
- **作業内容**:
  - 変換後のJSONLファイルの整合性チェック
  - 行数、エントリ数の確認
  - JSON構造の検証
  - 必須フィールドの存在確認

### Phase 2: 翻訳処理 (Claude手動実行)

#### 2.1 翻訳作業の流れ

1. 変換後のJSONLファイルを読み込み
2. 各行を順次処理して翻訳
3. 翻訳結果をJSONL形式で出力

#### 2.2 翻訳対象フィールド

- `name`: 用語名の翻訳
- `alias`: 別名（存在する場合）
- `definitions[].text`: 定義文の翻訳
- `confer`: 関連用語の翻訳（存在する場合）
- `example`: 使用例（存在する場合）
- `note`: 注記の翻訳（存在する場合）

#### 2.3 翻訳処理の具体的手順

##### 2.3.1 処理手順

1. **バルク処理**: `output/iso24765-terminology.jsonl` を10行ずつまとめて読み込み
2. **翻訳実行**: バッチ内の全ての行を翻訳ルールに従って並列処理
3. **結果出力**: 翻訳結果を `output/iso24765-terminology-ja.jsonl` に追記
4. **進捗記録**: 処理完了した行番号を `progress/translation-progress.txt` に記録

##### 2.3.2 再開機能

- 処理が中断された場合、進捗ファイルから最後に処理した行番号を読み取り
- 次のバッチから処理を再開することで、重複処理を防ぐ
- バッチサイズは処理効率と品質のバランスを考慮して調整可能

##### 2.3.3 翻訳ルール

1. **専門用語の背景**: システム・ソフトウェア開発の専門用語として翻訳
2. **翻訳方針**: 原文の意味を保持し、自然な日本語に翻訳
3. **文体**: 論文に適した文語訳を使用（口語訳は避ける）
4. **意訳の制限**: 原文の意味を大きく変える意訳は行わない
5. **専門性の維持**: システム開発の専門領域の文脈を常に考慮

##### 2.3.4 出力ファイル

- **翻訳結果**: `output/iso24765-terminology-ja.jsonl`
- **進捗記録**: `progress/translation-progress.txt`

##### 2.3.5 データ構造

翻訳後のJSONL形式：

```json
{
  "number": "3.1",
  "name": "1GL",
  "name_ja": "第1世代言語",
  "definitions": [
    {
      "text": "first-generation language",
      "text_ja": "第1世代言語",
      "reference": "..."
    }
  ],
  "confer": ["machine language"],
  "confer_ja": ["機械語"],
  "alias": [...],
  "alias_ja": [...],
  "example": "...",
  "example_ja": "...",
  "note": "...",
  "note_ja": "..."
}
```

### Phase 3: 品質チェック (Claude手動実行)

#### 3.1 品質チェック項目

- 専門用語の一貫性チェック
- 翻訳漏れの検出
- 用語の適切性検証
- 定義文の正確性確認

## 実装順序

### Phase 1: データ変換 (実装対象)

1. `scripts/convert-to-jsonl.ts` の実装
2. `scripts/validate-jsonl.ts` の実装
3. 変換テスト実行

### Phase 2: 翻訳処理 (Claude手動実行)

1. JSONLファイルを読み込み
2. 各行を順次翻訳
3. 翻訳結果を出力

### Phase 3: 品質チェック (Claude手動実行)

1. 翻訳結果の品質チェック
2. 一貫性の確認
3. 最終調整

## 技術的考慮事項

### Phase 1: データ変換

- **ファイルサイズ**: 2.0MB、51,030行の大容量ファイル
- **メモリ効率**: ストリーミング処理で大容量ファイルを処理
- **エラーハンドリング**: 不正なJSON、ファイルアクセスエラーの処理

## 成功指標

### Phase 1: データ変換

1. **変換成功率**: 100%（4,634語全て変換完了）
2. **データ整合性**: 変換前後でデータ損失なし
3. **処理時間**: 数分以内で完了

### Phase 2: 翻訳処理

1. **翻訳完了率**: 100%（全用語翻訳完了）
2. **翻訳品質**: 専門用語の一貫性確保

### Phase 3: 品質チェック

1. **品質スコア**: 翻訳の適切性評価
2. **一貫性**: 同一用語の翻訳統一
